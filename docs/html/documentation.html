<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.4">
<meta name="author" content="Michael Batz">
<title>OpenNMS AlarmForwarder Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
body{-webkit-font-smoothing:antialiased}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
body{tab-size:4}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<style>
/* Pygments styles disabled. Pygments is not available. */
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>OpenNMS AlarmForwarder Guide</h1>
<div class="details">
<span id="author" class="author">Michael Batz</span><br>
<span id="email" class="email"><a href="mailto:Michael.Batz@nethinks.com">Michael.Batz@nethinks.com</a></span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">Introduction</a></li>
<li><a href="#_setup">Setup</a>
<ul class="sectlevel2">
<li><a href="#_manually_setup_your_environment">Manually setup your environment</a></li>
<li><a href="#_start_a_docker_container">Start a Docker Container</a></li>
</ul>
</li>
<li><a href="#_configuration_of_the_alarmforwarder_application">Configuration of the AlarmForwarder application</a>
<ul class="sectlevel2">
<li><a href="#_general_configuration_em_alarmforwarder_conf_em">General configuration (<em>alarmforwarder.conf</em>)</a></li>
<li><a href="#_logging_configuration_em_logging_conf_em">Logging configuration (<em>logging.conf</em>)</a></li>
</ul>
</li>
<li><a href="#_using_alarmforwarder">Using AlarmForwarder</a>
<ul class="sectlevel2">
<li><a href="#_sources">Sources</a></li>
<li><a href="#_targets">Targets</a></li>
<li><a href="#_forwarding_rules">Forwarding Rules</a></li>
</ul>
</li>
<li><a href="#_rest_api">REST API</a>
<ul class="sectlevel2">
<li><a href="#__sources">/sources</a></li>
<li><a href="#__targets">/targets</a></li>
<li><a href="#__rules">/rules</a></li>
</ul>
</li>
<li><a href="#_support">Support</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>OpenNMS AlarmForwarder is a small tool written in Python for doing notifications on OpenNMS alarms. In a configurable interval, alarms were read from one or multiple OpenNMS servers (using the OpenNMS REST API) and saved in a local database. You can define multiple targets for notifications (e.g. mail, SMS, OTRS ticket) and forwarding rules. The forwarding of alarms can be delayed and suppressed, if the alarm is resolved within this interval. A daemon handles the alarm forwarding and most of the configuration is done in a small WebUI (with REST API).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_setup">Setup</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_manually_setup_your_environment">Manually setup your environment</h3>
<div class="paragraph">
<p>AlarmForwarder is written in Python3. The following libraries are required:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>requests</p>
</li>
<li>
<p>ldap3</p>
</li>
<li>
<p>gunicorn</p>
</li>
<li>
<p>flask</p>
</li>
<li>
<p>sqlalchemy</p>
</li>
<li>
<p>psycopg2</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The data were stored in a PostgreSQL database. Please create an empty database and fill in the connection parameters in <em>etc/alarmforwarder.conf</em>. To install the database schema, please execute the <em>install.py</em> script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">./install.py</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now you can start AlarmForwarder by executing <em>opennms_alarmforwarder.py</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">./opennms_alarmforwarder.py</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can now log into the WebUI by accessing the URL <a href="http://&lt;Host&gt;:5000" class="bare">http://&lt;Host&gt;:5000</a> with username <em>admin</em> and password <em>admin</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_start_a_docker_container">Start a Docker Container</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration_of_the_alarmforwarder_application">Configuration of the AlarmForwarder application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The general behavior of the application is stored in configuration files in the <em>etc</em> subdirectory. OpenNMS sources, targets for alarm forwarding and rules were configured in the WebUI. Please see the "Using AlarmForwarder" section. The following configuration files are available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>alarmforwarder.conf: general configuration</p>
</li>
<li>
<p>logging.conf: log configuration</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_general_configuration_em_alarmforwarder_conf_em">General configuration (<em>alarmforwarder.conf</em>)</h3>
<div class="paragraph">
<p>Please have a look at the following example of the alarmforwarder.conf file:</p>
</div>
<div class="listingblock">
<div class="title">alarmforwarder.conf</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="ini">[DatabaseConnection]
url = postgresql://alarmforwarder:alarmforwarder@localhost/alarmforwarder

[Webserver]
bind = 0.0.0.0:5000
workers = 2

[Scheduler]
queryInterval = 30

[Security]
authenticationProvider = LocalUserAuthenticationProvider

[LdapAuthentication]
url = ldaps://localhost:636
bindDn = cn=reader,dc=example,dc=com
bindPassword = secret1234
baseDn = dc=example,dc=com
searchfilter = (uid=%%username%%)</code></pre>
</div>
</div>
<div class="paragraph">
<p>This configuration file is divided in multiple sections. A description of the parameters in the secions can be found below.</p>
</div>
<div class="sect3">
<h4 id="__databaseconnection">[DatabaseConnection]</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>url</strong></dt>
<dd>
<p>Database URL for the AlarmForwarder database.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="__webserver">[Webserver]</h4>
<div class="paragraph">
<p>This section configures the integrated webserver.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>bind</strong></dt>
<dd>
<p>Address and port, the webserver should use.</p>
</dd>
<dt class="hdlist1"><strong>workers</strong></dt>
<dd>
<p>Number of worker processes.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="__scheduler">[Scheduler]</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>queryInterval</strong></dt>
<dd>
<p>The interval (in seconds) that is used to check for new alarms from the configured OpenNMS setups.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="__security">[Security]</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>authenticationProvider</strong></dt>
<dd>
<p>The authentication mechanism that is used for the WebUI. At the moment the following providers are available: <em>LocalUserAuthenticationProvider</em>, <em>LdapAuthenticationProvider</em>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="__ldapauthentication">[LdapAuthentication]</h4>
<div class="paragraph">
<p>If you want to use LDAP authentication, you can define some parameters in this section.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>url</strong></dt>
<dd>
<p>URL of a LDAP server. If you want to configure multiple servers, please use the ";" sign. Example: ldaps://server1:636;ldaps://server2:636</p>
</dd>
<dt class="hdlist1"><strong>bindDn</strong></dt>
<dd>
<p>BindDN that is used for read access.</p>
</dd>
<dt class="hdlist1"><strong>bindPassword</strong></dt>
<dd>
<p>Password used for read access.</p>
</dd>
<dt class="hdlist1"><strong>baseDn</strong></dt>
<dd>
<p>BaseDN for finding users.</p>
</dd>
<dt class="hdlist1"><strong>searchfilter</strong></dt>
<dd>
<p>LDAP filter that is used for finding users. Please use the %%username%% string to use the inserted username.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_logging_configuration_em_logging_conf_em">Logging configuration (<em>logging.conf</em>)</h3>
<div class="paragraph">
<p>In the file <em>logging.conf</em>, the logging of AlarmForwarder is configured. It is a standard Python logging configuration file in configparser format and understands all options, that are allowed here.</p>
</div>
<div class="paragraph">
<p>For every part of AlarmForwarder (receiver, scheduler, forwarder, security), a logger is configured and can be changed to fit your needs.</p>
</div>
<div class="paragraph">
<p>By default, the logs are written to files in the <em>logs</em> subdirectory. Only warnings and errors from receiver and scheduler were logged and info messages of forwarder, which contains all forwarded messages.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_alarmforwarder">Using AlarmForwarder</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the AlarmForwarder WebUI, you can configure Sources, Targets and Forwarding Rules.</p>
</div>
<div class="sect2">
<h3 id="_sources">Sources</h3>
<div class="paragraph">
<p>A Source is an OpenNMS server. The communication to OpenNMS is done using the OpenNMS REST API. You add a new Source in the WebUI by configuring the following parameters:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Name</strong></dt>
<dd>
<p>Name of the source. There should be no spaces or special characters in the name.</p>
</dd>
<dt class="hdlist1"><strong>URL</strong></dt>
<dd>
<p>URL of the OpenNMS REST API, e.g. <em><a href="http://demo.opennms.org/opennms/rest" class="bare">http://demo.opennms.org/opennms/rest</a></em></p>
</dd>
<dt class="hdlist1"><strong>Username</strong></dt>
<dd>
<p>Username of an OpenNMS user, e.g. <em>demo</em></p>
</dd>
<dt class="hdlist1"><strong>Password</strong></dt>
<dd>
<p>Password of the OpenNMS user, e.g. <em>demo</em></p>
</dd>
<dt class="hdlist1"><strong>Filter</strong></dt>
<dd>
<p>Query filter for getting alarms. You can use all query filters that were described in the OpenNMS Development Guide for the REST Endpoint <em>/alarms</em>. If you leave this field empty, no filtering is done.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_targets">Targets</h3>
<div class="paragraph">
<p>Alarms were forwarded to targets. Targets can also be configured in the AlarmForwarder WebUI. Each target has a unique Name, a Forwarding Class and a delay. The Forwarding Class defines the way, how alarms were forwarded. You can find a description of each available class in the following secitions. For each Forwarding Class, specific parameters can be set. The delay (in seconds) describes, how long the forwarding of the alarm will be delayed. If an alarm is resolved during that time, it will not be forwarded.</p>
</div>
<div class="paragraph">
<p>For some parameters of the targets, the following variables can be used:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">variable</th>
<th class="tableblock halign-left valign-top">description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%alarm_uei%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UEI of the alarm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%alarm_logmsg%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Logmessage of the alarm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%alarm_timestamp%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timestamp of the first event of the alarm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%alarm_serverity%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Severity of the alarm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%alarm_node_label%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nodelabel of the alarm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%alarm_node_interface%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interface of the alarm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%alarm_description%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description of the alarm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%alarm_operinstruct%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operator instructions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%alarm_id%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the alarm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%alarm_source%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the OpenNMS Source</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">%parm_&lt;parmname&gt;%</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value of the parameter &lt;parmname&gt;. e.g. parm_cmdbid</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_stdoutforwarder">StdoutForwarder</h4>
<div class="paragraph">
<p>This is more for debugging and prints out alarms on standart output. The following parameters can be set:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>AlertMessage</strong></dt>
<dd>
<p>Format of the message of a new alarm. Variables can be used.</p>
</dd>
<dt class="hdlist1"><strong>ResolvedMessage</strong></dt>
<dd>
<p>Format of the message, if an alarm is resolved. Variables can be used.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_emailforwarder">EmailForwarder</h4>
<div class="paragraph">
<p>This Forwarding Class forwards alarms via e-mail. The following parameters can be set:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>smtpServer</strong></dt>
<dd>
<p>SMTP server for sending mails.</p>
</dd>
<dt class="hdlist1"><strong>smtpAuth</strong></dt>
<dd>
<p>This could be "true" or "false" and defines, if a SMTP authentication needs to be done.</p>
</dd>
<dt class="hdlist1"><strong>smtpUser</strong></dt>
<dd>
<p>Username for SMTP authentication.</p>
</dd>
<dt class="hdlist1"><strong>smtpPassword</strong></dt>
<dd>
<p>Password for SMTP authentication.</p>
</dd>
<dt class="hdlist1"><strong>fromAddress</strong></dt>
<dd>
<p>Sender address.</p>
</dd>
<dt class="hdlist1"><strong>target</strong></dt>
<dd>
<p>Target address.</p>
</dd>
<dt class="hdlist1"><strong>subjectFormatAlarm</strong></dt>
<dd>
<p>Template of the mail subject for the alarm message. Variables can be used here.</p>
</dd>
<dt class="hdlist1"><strong>subjectFormatResolved</strong></dt>
<dd>
<p>Template of the mail subject for the resolved message. Variables can be used here.</p>
</dd>
<dt class="hdlist1"><strong>messageFormatAlarm</strong></dt>
<dd>
<p>Template of the alarm message. Variables can be used here.</p>
</dd>
<dt class="hdlist1"><strong>messageFormatResolved</strong></dt>
<dd>
<p>Template of the resolved  message. Variables can be used here.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_otrsticketforwarder">OtrsTicketForwarder</h4>
<div class="paragraph">
<p>This Forwarding Class creates ticket in the ticket system OTRS. Also, tickets can be closed if an alarm is resolved. If you want to use this forwarder, a Webservice needs to be created in OTRS. A configuration for OTRS can be found in the <em>contrib/otrs-configuration</em> directory. The following parameters can be set for this forwarder:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>otrsRestUrl</strong></dt>
<dd>
<p>URL for the REST webservice, that was created in OTRS.</p>
</dd>
<dt class="hdlist1"><strong>otrsRestUser</strong></dt>
<dd>
<p>Username of a user that has the rights to create and update tickets.</p>
</dd>
<dt class="hdlist1"><strong>otrsRestPassword</strong></dt>
<dd>
<p>Password of the user.</p>
</dd>
<dt class="hdlist1"><strong>otrsQueue</strong></dt>
<dd>
<p>Queue, where tickets are created.</p>
</dd>
<dt class="hdlist1"><strong>otrsCustomerMail</strong></dt>
<dd>
<p>Mail address of the customer that should be used.</p>
</dd>
<dt class="hdlist1"><strong>additionalFields</strong></dt>
<dd>
<p>Here you can set the content of dynamic fields in the ticket. The format is <em>field1=value1;field2=value2</em>. Variables can be used here.</p>
</dd>
<dt class="hdlist1"><strong>subjectFormatAlarm</strong></dt>
<dd>
<p>Template of the ticket subject. Variables can be used here.</p>
</dd>
<dt class="hdlist1"><strong>messageFormatAlarm</strong></dt>
<dd>
<p>Template of the ticket content. Variables can be used here.</p>
</dd>
<dt class="hdlist1"><strong>messageFormatResolved</strong></dt>
<dd>
<p>Template of the resolved message, that will be written in the ticket, if the alarm is resolved. Variables can be used here.</p>
</dd>
<dt class="hdlist1"><strong>closeTickets</strong></dt>
<dd>
<p>This option can be set to "true", if tickets of resolved alarms should be closed automatically.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_smseagleforwarder">SmsEagleForwarder</h4>
<div class="paragraph">
<p>This fowarder sends SMS using a SMSEagle appliance. The following parameters can be set:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>url</strong></dt>
<dd>
<p>Base URL of the SMSEagle API.</p>
</dd>
<dt class="hdlist1"><strong>user</strong></dt>
<dd>
<p>Username of the SMSEagle API.</p>
</dd>
<dt class="hdlist1"><strong>password</strong></dt>
<dd>
<p>Password of the SMSEagle API.</p>
</dd>
<dt class="hdlist1"><strong>target</strong></dt>
<dd>
<p>Target phone number.</p>
</dd>
<dt class="hdlist1"><strong>messageFormatAlarm</strong></dt>
<dd>
<p>Template of the SMS for forwarding alarms. Variables can be used here.</p>
</dd>
<dt class="hdlist1"><strong>messageFormatResolved</strong></dt>
<dd>
<p>Template of the SMS for the resolved message. Variables can be used here.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_forwarding_rules">Forwarding Rules</h3>
<div class="paragraph">
<p>A Forwarding Rule describes, which alarms should be forwarded to which targets. Each Forwarding Rule consists of a rule and a configured target. A rule has the following structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code>Basic structure
structure: variable1=value1;variable2=value2
example: alarm_uei=uei.opennms.org/nodes/nodeDown

operators:
= means exact match
~ means regex match
example: alarm_uei~.*nodeDown.*</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following variables can be used:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">variable</th>
<th class="tableblock halign-left valign-top">description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">alarm_uei</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UEI of the alarm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">alarm_logmsg</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Logmessage of the alarm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">alarm_timestamp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timestamp of the first event of the alarm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">alarm_serverity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Severity of the alarm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">alarm_node_label</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nodelabel of the alarm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">alarm_node_interface</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interface of the alarm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">alarm_description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description of the alarm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">alarm_operinstruct</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operator instructions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">alarm_id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID of the alarm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">alarm_source</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the OpenNMS Source</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rest_api">REST API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>AlarmForwarder has a REST API to access Sources, Targets and Forwarding Rules. Base URL by default is <em><a href="http://&lt;hostname&gt;:5000" class="bare">http://&lt;hostname&gt;:5000</a></em>. A HTTP basic authentication with a valid AlarmForwarder user needs to be done. The data format is JSON. A lot of simple example scripts for the REST API can be found in the <em>/contrib</em> directory.</p>
</div>
<div class="sect2">
<h3 id="__sources">/sources</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">operation</th>
<th class="tableblock halign-left valign-top">resource</th>
<th class="tableblock halign-left valign-top">description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/sources</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">list all configured sources</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/sources/&lt;name&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">get source with name &lt;name&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/sources/&lt;name&gt;/test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">test, if source &lt;name&gt; works</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/sources/&lt;name&gt;/delete</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">delete source &lt;name&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/sources/add</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">adds a new source</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/sources/&lt;name&gt;/edit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">edits source &lt;name&gt;</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="__targets">/targets</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">operation</th>
<th class="tableblock halign-left valign-top">resource</th>
<th class="tableblock halign-left valign-top">description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/targets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">list all configured targets</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/targets/&lt;name&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">get target with name &lt;name&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/targets/&lt;name&gt;/test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">send test message to target &lt;name&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/targets/&lt;name&gt;/delete</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">delete target &lt;name&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/targets/add</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">adds a new target</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/targets/&lt;name&gt;/edit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">edits target &lt;name&gt;</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="__rules">/rules</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">operation</th>
<th class="tableblock halign-left valign-top">resource</th>
<th class="tableblock halign-left valign-top">description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/rules</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">list all configured forwarding rules</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/rules/&lt;rule_id&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">get forwarding rule with id &lt;rule_id&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/rules/&lt;rule_id&gt;/delete</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">delete forwarding rule &lt;rule_id&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/rules/add</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">adds a new forwarding rule</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/rules/&lt;rule_id&gt;/edit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">edits forwarding rule &lt;rule_id&gt;</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_support">Support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you have questions, found a bug or have an idea to enhance AlarmForwarder, please open an issue at the <a href="https://github.com/NETHINKS/opennms_alarmforwarder">GitHub project</a>.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2016-11-16 14:52:53 CET
</div>
</div>
</body>
</html>